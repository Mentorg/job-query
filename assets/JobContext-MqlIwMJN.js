import{r as u,d as P,b as L,j as A}from"./index-gK5jVzhw.js";import{j as p}from"./job-YlKGiUrw.js";import{c as M}from"./company-ZnYdRKnL.js";import{r as U}from"./recruiter-XSYqMn4-.js";import{a as k}from"./application-vugV2d0r.js";const f=new Date,E=String(f.getMonth()+1).padStart(2,"0"),F=`${f.getFullYear()}-${E}-${String(f.getDate()).padStart(2,"0")}`,d=new Date(f);d.setMonth(d.getMonth()+1);const j=String(d.getMonth()+1).padStart(2,"0"),N=`${d.getFullYear()}-${j}-${String(d.getDate()).padStart(2,"0")}`,b=(n,t)=>n==="position_title"&&(!t||!/^[a-zA-Z\s]{4,}$/.test(t))?"Please enter a job title with a minimum of 4 characters":n==="salary_from"&&(!t||!/^(300|\d{3,6})(?:\.\d{1,2})?$/.test(t))?"Please enter a valid minimum salary (minimum: $100)":n==="salary_to"&&(!t||!/^(300|\d{3,6})(?:\.\d{1,2})?$/.test(t))?"Please enter a valid salary (minimum: $100)":n==="position_overview"&&(!t||!/^[\s\S]{10,500}$/.test(t))?"Please provide a position overview between 10 and 500 characters":(n==="responsibilities"||n==="qualifications")&&(!t||!/^[\s\S]{10,500}(?:;\s*[\s\S]{10,500})*;?$/.test(t))?"Please provide a list of responsibilities or qualifications separated by semicolons":!t&&["location","work_preference","employment_type","seniority","experience","education","requires_visa_sponsorship","salary_frequency"].includes(n)?`Please select an option for ${n.replace(/_/g," ")}`:"",T=u.createContext(void 0),V=["open","filled","expired"];function tt({children:n}){const{user:t}=P(),v=L(),g=[];k.filter(e=>e.id===0).forEach(e=>{const i=p.filter(o=>o.id===e.advertisement_id);g.push(...i)});const w=p.filter(e=>e.recruiter_id===(t==null?void 0:t.id)),$=(t==null?void 0:t.role)==="recruiter"?w:g,a=U.find(e=>e.id===(t==null?void 0:t.id)),J=M.find(e=>e.id===(a==null?void 0:a.company_id)),x={id:p[p.length-1].id+1,position_title:"",location:"",employment_type:"",work_preference:"",seniority:"",experience:"",salary_from:"",salary_to:"",salary_frequency:"",applicants:0,status:"open",created_at:F,deadline:N,education:"",requires_visa_sponsorship:!1,slug:"",position_overview:"",responsibilities:"",qualifications:"",recruiter_id:t==null?void 0:t.id,company_id:a==null?void 0:a.company_id},[r,c]=u.useState($),[m,h]=u.useState(x),[l,S]=u.useState({position_title:"",location:"",employment_type:"",work_preference:"",seniority:"",experience:"",salary_from:"",salary_to:"",salary_frequency:"",deadline:"",education:"",requires_visa_sponsorship:"",position_overview:"",responsibilities:"",qualifications:""}),D=e=>e.toLowerCase().replace(/[^\w\s]/g,"").replace(/\s+/g,"-"),q={errors:l,options:V,jobList:r,newJob:m,userCompany:J,handleChange:e=>{const{name:i,value:o}=e.target,s=b(i,o);S({...l,[i]:s}),h(i==="position_title"?_=>({..._,[i]:o,slug:D(o)}):{...m,[i]:o})},handleUpdate:(e,i)=>{const o=r.map(s=>s.id===e?i:s);c(o)},handleChangeUpdate:(e,i)=>{const{name:o,value:s}=e.target,_=b(o,s);S({...l,[o]:_});const C=r.map(y=>y.id===i?{...y,[o]:s}:y);c(C)},updateStatus:(e,i)=>{const o=r.map(s=>s.id===e?{...s,status:i}:s);c(o)},handleDelete:e=>{c(i=>i.filter(o=>o.id!==e))},handleSaveAsDraft:()=>{},handleSubmit:()=>{if(Object.keys(l).filter(o=>l[o]).length>0)return;const i=[...r,m];c(i),h({}),v("/dashboard/jobs")}};return A.jsx(T.Provider,{value:q,children:n})}export{T as JobContext,tt as default};
