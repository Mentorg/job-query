import{r as m,j as e,d as j}from"./index-gK5jVzhw.js";import{u as f,a as w,J as C}from"./JobsTable-BK7n3nBe.js";import{H as N,k as g,l as v,m as J}from"./index-Jk20eeFW.js";import{M as o,a,L as p,b as M}from"./Modal-CoWiFoLe.js";import{F as k}from"./index-xB3iB-V5.js";import{C as E}from"./ConfirmDelete-1b08a0zt.js";import{S as _}from"./StatusChip-L4my39EZ.js";import{C as y}from"./Chip-RxkCiOL4.js";import{JobContext as u}from"./JobContext-MqlIwMJN.js";import{u as F,E as L,V as O}from"./useFilters-80iz4d7K.js";import"./index-GsJ-QSZe.js";import"./iconBase-2lTqbh99.js";import"./useSortableData-3u81p8pr.js";import"./Select-TTI9W5Of.js";import"./TextArea--gC4PYop.js";import"./company-ZnYdRKnL.js";import"./job-YlKGiUrw.js";import"./recruiter-XSYqMn4-.js";import"./application-vugV2d0r.js";import"./index-mvWJ4mzR.js";function b({job:s}){const{user:r,jobAdCompany:l,navigate:n,deleteJob:t,handleMarkOpen:i,handleMarkFilled:d,handleMarkExpired:c}=f(s),x=m.useContext(u);if(!x)throw new Error("JobContext is not provided");const{handleUpdate:h}=x;return e.jsxs("div",{className:"flex rounded-md border-2 border-slate-100 p-4",children:[e.jsxs("div",{className:"flex w-[90%] flex-col gap-y-6",children:[e.jsxs("div",{className:"flex",children:[e.jsx("img",{src:l==null?void 0:l.avatar,alt:`${l==null?void 0:l.name}'s logo`,className:"w-[3rem] rounded-full"}),e.jsxs("div",{className:"ml-4 flex flex-col justify-center",children:[e.jsx("h2",{className:"line-clamp-1 font-semibold",children:s.position_title}),e.jsx("p",{className:"line-clamp-1 text-xs font-medium text-slate-500 sm:text-sm",children:l==null?void 0:l.name})]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"flex flex-row items-baseline text-sm",children:["Posted:",e.jsx("span",{className:"ml-2 font-medium text-slate-500",children:s.created_at})]}),e.jsxs("p",{className:"flex flex-row items-baseline text-sm",children:["Deadline:",e.jsx("span",{className:"ml-2 font-medium text-red-500",children:s.deadline})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{children:s.status}),e.jsx(y,{icon:e.jsx(k,{className:"text-white"}),className:"flex h-fit items-center rounded-3xl bg-blue-500 px-3 py-1",children:s.location}),e.jsxs("p",{className:"flex items-center text-base font-semibold leading-3",children:[e.jsx(N,{className:"h-[1rem] w-[1rem] text-primary"}),e.jsx("span",{className:"ml-1",children:s.applicants})]})]})]}),e.jsx("div",{className:"w-[10%]",children:e.jsx(o,{children:e.jsxs(a.Menu,{children:[e.jsx(a.Toggle,{id:s.id.toString()}),e.jsxs(a.List,{id:s.id.toString(),children:[e.jsxs(a.Button,{type:"option",onClick:()=>n(`${(r==null?void 0:r.role)==="recruiter"?"/dashboard":"/user"}/jobs/${s.id}`),children:[e.jsx(g,{}),e.jsx("span",{children:"View Job"})]}),(r==null?void 0:r.role)==="recruiter"&&e.jsxs(e.Fragment,{children:[e.jsxs(a.Button,{type:"option",onClick:i,children:[e.jsx(p,{}),e.jsx("span",{children:"Mark as Open"})]}),e.jsxs(a.Button,{type:"option",onClick:d,children:[e.jsx(M,{}),e.jsx("span",{children:"Mark as Filled"})]}),e.jsxs(a.Button,{type:"option",onClick:c,children:[e.jsx(p,{}),e.jsx("span",{children:"Mark as Expired"})]}),e.jsx(o.Open,{opens:"edit",children:e.jsxs(a.Button,{type:"option",children:[e.jsx(v,{}),e.jsx("span",{children:"Edit"})]})}),e.jsx(o.Open,{opens:"delete",children:e.jsxs(a.Button,{type:"option",children:[e.jsx(J,{}),e.jsx("span",{children:"Delete"})]})})]})]}),e.jsx(o.Window,{name:"edit",children:e.jsx(w,{job:s,onHandleUpdate:h,onCloseModal:close})}),e.jsx(o.Window,{name:"delete",children:e.jsx(E,{resourceName:s.position_title,onConfirm:()=>{t(s.id)},onCloseModal:close})})]})})})]},s.id)}function B({sort:s}){const r=m.useContext(u);if(!r)throw new Error("JobContext is not provided");const{jobList:l}=r,n=[...l].sort((t,i)=>{switch(s){case"date-desc":return i.created_at.localeCompare(t.created_at);case"date-asc":return t.created_at.localeCompare(i.created_at);case"title-asc":return t.position_title.localeCompare(i.position_title);case"title-desc":return i.position_title.localeCompare(t.position_title);case"location-asc":return t.location.localeCompare(i.location);case"location-desc":return i.location.localeCompare(t.location);case"status-filled":return t.status==="filled"?-1:i.status==="filled"?1:0;case"status-open":return t.status==="open"?-1:i.status==="open"?1:0;case"status-expired":return t.status==="expired"?-1:i.status==="expired"?1:0;default:return 0}});return e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4",children:e.jsx(a,{children:n.map(t=>e.jsx(b,{job:t},t.id))})})}function ee(){const{gridView:s,sort:r,jobFilter:l,handleOrder:n,handleGridView:t}=F(),{user:i}=j();return e.jsxs("div",{className:"flex w-full flex-col gap-y-10 px-6 py-4 md:px-10 lg:px-12 xl:px-14",children:[e.jsxs(L,{title:(i==null?void 0:i.role)==="recruiter"?"Jobs":"Applied",children:[s&&e.jsx("select",{value:r,onChange:n,className:"rounded-md border-2 px-5 py-2",children:Object.entries(l).map(([d,c])=>e.jsx("option",{value:d,children:c},d))}),e.jsx(O,{onClick:t,gridView:s})]}),s?e.jsx(B,{sort:r}):e.jsx("div",{className:"w-[90dvw] lg:w-[65dvw] xl:w-[70dvw]",children:e.jsx(C,{})})]})}export{ee as default};
